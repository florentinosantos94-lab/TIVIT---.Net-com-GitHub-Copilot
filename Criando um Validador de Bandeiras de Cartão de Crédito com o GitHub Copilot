# cartao_credito.py

import re

class CardValidator:
    def __init__(self, card_number):
        self.card_number = card_number

    def is_valid(self):
        """Valida o número do cartão com o algoritmo de Luhn."""
        if not re.match(r'^\d{13,19}$', self.card_number):
            return False
        
        total = 0
        reversed_digits = [int(d) for d in self.card_number[::-1]]

        for i, digit in enumerate(reversed_digits):
            if i % 2 == 1:  # dígitos de índice ímpar
                digit *= 2
                if digit > 9:
                    digit -= 9
            total += digit

        return total % 10 == 0

    def card_brand(self):
        """Identifica a bandeira do cartão baseado no número."""
        if re.match(r'^4[0-9]{12}(?:[0-9]{3})?$', self.card_number):
            return "Visa"
        elif re.match(r'^5[1-5][0-9]{14}$', self.card_number):
            return "MasterCard"
        elif re.match(r'^3[47][0-9]{13}$', self.card_number):
            return "American Express"
        elif re.match(r'^6(?:011|5[0-9]{2})[0-9]{12}$', self.card_number):
            return "Discover"
        else:
            return "Desconhecida"

def main():
    card_number = input("Digite o número do cartão de crédito: ")
    validator = CardValidator(card_number)

    if validator.is_valid():
        print("O número do cartão é válido.")
        print(f"Bandeira do cartão: {validator.card_brand()}")
    else:
        print("O número do cartão é inválido.")

if __name__ == "__main__":
    main()
